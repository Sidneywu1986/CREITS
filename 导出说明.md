# REITs 智能助手 - ZIP 导出完成

## 导出信息

- **文件名**: `reits-assistant.zip`
- **文件大小**: 11MB
- **导出时间**: 2025-02-15
- **Git Commit**: `6a733c7` - docs: 添加代码导出指南和脚本，完善项目文档
- **导出方式**: Git Archive (ZIP format)

## 导出内容

导出的 ZIP 文件包含：

✅ 完整的源代码（src/）
✅ 项目配置文件（.coze, package.json, tsconfig.json 等）
✅ 项目文档（docs/, PROJECT_GUIDE.md, QUICK_EXPORT_GUIDE.md 等）
✅ 数据库 Schema（database/schema.sql）
✅ 环境变量模板（.env.example）
✅ 导出脚本（export-code.sh）
✅ README 文档

❌ 不包含：node_modules, .next, .git

## 本地调试步骤

### 1. 下载 ZIP 文件

从沙箱环境下载 `reits-assistant.zip` 文件到本地。

### 2. 解压文件

```bash
# Windows
右键点击 reits-assistant.zip -> "解压到 reits-assistant"

# Mac/Linux
unzip reits-assistant.zip
```

### 3. 进入项目目录

```bash
cd reits-assistant
```

### 4. 初始化本地 Git

```bash
git init
git add .
git commit -m "Initial commit: REITs 智能助手代码"
```

### 5. 安装依赖

**重要：必须使用 pnpm**

```bash
# 检查是否已安装 pnpm
pnpm --version

# 如果没有安装，先安装 pnpm
npm install -g pnpm

# 安装项目依赖
pnpm install
```

### 6. 配置环境变量

```bash
# 复制环境变量模板
cp .env.example .env.local

# 编辑环境变量文件
# Windows: 记事本打开 .env.local
# Mac/Linux: nano .env.local 或 vim .env.local
```

**必须配置的内容**：

```env
# 百度地图 API Key（需要申请）
# 申请地址：https://lbsyun.baidu.com/
NEXT_PUBLIC_BAIDU_MAP_AK=your_baidu_map_ak

# API 基础 URL
NEXT_PUBLIC_API_BASE_URL=http://localhost:5000/api
```

**可选配置**：

```env
# Supabase 配置（如果需要使用数据库）
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key

# 应用配置
NEXT_PUBLIC_APP_NAME=REITs 智能助手
NEXT_PUBLIC_APP_VERSION=1.0.0

# 加密配置
NEXT_PUBLIC_ENCRYPTION_ENABLED=true

# 调试模式
NEXT_PUBLIC_DEBUG=false
```

### 7. 启动开发服务器

```bash
# 方法 1：使用 Coze CLI（推荐）
coze dev

# 方法 2：使用 pnpm
pnpm dev
```

### 8. 访问应用

开发服务器启动后，访问以下地址：

- **主页**: http://localhost:5000
- **BBS 测试**: http://localhost:5000/test/encryption
- **性能测试**: http://localhost:5000/test/performance

---

## 如何申请百度地图 API Key

1. 访问 [百度地图开放平台](https://lbsyun.baidu.com/)
2. 注册账号并登录
3. 进入"控制台" -> "应用管理" -> "我的应用"
4. 点击"创建应用"
5. 填写应用信息：
   - 应用名称：REITs 智能助手
   - 应用类型：浏览器端
   - 启用服务：JavaScript API v3.0
6. 提交后，等待审核（通常几分钟）
7. 审核通过后，复制 AK（Access Key）
8. 将 AK 填入 `.env.local` 文件中的 `NEXT_PUBLIC_BAIDU_MAP_AK`

---

## 项目功能清单

### 1. REITs 核心功能
- ✅ Agent 对话系统 - 多个专业 Agent 协同工作
- ✅ 市场行情 - ECharts 图表展示实时数据
- ✅ 新闻资讯 - 行业新闻聚合与展示
- ✅ REITs 估值计算器 - 专业估值计算工具
- ✅ 地理位置分析 - 百度地图集成
- ✅ 交易所公告查询 - 交易所公告数据
- ✅ 定价档位管理 - REITs 定价档位
- ✅ REITs 八张表 - 专业数据库展示

### 2. 社区功能
- ✅ 匿名 BBS - 科技风匿名社区
  - 列表页、详情页、发帖页
  - 四层加密架构（BBS 签名、书密码、IndexedDB、BBS 验证）
- ✅ 专家智库
  - 专家列表、详情页
  - 打赏功能
- ✅ 积分系统
  - 积分中心
  - 积分充值
  - 积分提现
  - 积分历史记录

### 3. 测试功能
- ✅ 加密测试页面
  - BBS 签名测试
  - 书密码加密测试
- ✅ 性能基准测试页面
  - WASM 加载时间测试
  - 加密/解密性能测试
  - API 响应时间测试
  - IndexedDB 查询时间测试

### 4. 基础设施
- ✅ 加密模块
  - BBS 签名（匿名身份）- 当前为模拟实现
  - 书密码加密（安全通信）
- ✅ 存储模块
  - IndexedDB 封装（本地存储）
- ✅ API 客户端
  - 统一 API 客户端
  - 自动注入认证头
  - 全局错误处理
  - 重试机制
- ✅ 状态管理
  - Zustand（客户端状态）
  - TanStack Query（服务端状态）

---

## 技术栈

### 前端框架
- Next.js 16 (Pages Router)
- React 19
- TypeScript 5
- Zustand 5.0.11
- @tanstack/react-query 5.90.21

### UI 组件
- shadcn/ui (基于 Radix UI)
- Tailwind CSS 4
- ECharts 6.0.0
- 百度地图 JavaScript API v3.0

### 后端服务
- Supabase (数据库服务)
- MySQL 8.0+
- Next.js API Routes

### 加密与安全
- idb 8.0.3 (IndexedDB)
- @docknetwork/crypto-wasm ^0.10.0 (待集成)

---

## 项目结构

```
reits-assistant/
├── src/
│   ├── components/          # React 组件
│   │   ├── ui/             # shadcn/ui 基础组件
│   │   ├── agent/          # Agent 组件
│   │   ├── reits/          # REITs 组件
│   │   ├── bbs/            # BBS 组件
│   │   ├── expert/         # 专家组件
│   │   └── points/         # 积分组件
│   ├── lib/
│   │   ├── encryption/     # 加密模块
│   │   ├── storage/        # 存储模块
│   │   ├── api/            # API 客户端
│   │   ├── database/       # 数据库模块
│   │   └── utils.ts        # 工具函数
│   ├── stores/             # Zustand 状态管理
│   ├── hooks/              # 自定义 Hooks
│   ├── types/              # TypeScript 类型
│   └── pages/              # Pages Router 页面
├── database/
│   └── schema.sql          # 数据库 Schema
├── docs/                   # 项目文档
├── public/                 # 静态资源
├── .coze                   # Coze CLI 配置
├── .env.example            # 环境变量模板
├── next.config.js          # Next.js 配置
├── package.json            # 依赖管理
├── tsconfig.json           # TypeScript 配置
├── tailwind.config.ts      # Tailwind 配置
├── PROJECT_GUIDE.md        # 项目详细指南
├── QUICK_EXPORT_GUIDE.md   # 快速导出指南
├── export-code.sh          # 导出脚本
└── README.md               # 项目说明
```

---

## 常见问题

### Q: 为什么必须使用 pnpm？
A: 项目已配置 `preinstall` 脚本，强制使用 pnpm。pnpm 更快、更节省空间，且依赖管理更严格。

### Q: BBS 签名是真实的吗？
A: 当前为模拟实现，需要集成 `@docknetwork/crypto-wasm@^0.10.0` 实现真实签名。详见 `docs/安全增强与测试完善指南.md`。

### Q: 如何配置 Supabase？
A: 如果需要使用 Supabase 数据库，在 `.env.local` 中填入你的 Supabase URL 和 Anon Key。

### Q: 性能测试页面如何使用？
A: 访问 http://localhost:5000/test/performance，点击"运行所有测试"按钮。

### Q: 如何导入数据库 Schema？
A: 如果使用 MySQL 数据库，执行：
```bash
mysql -u your_username -p your_database < database/schema.sql
```

### Q: 代码报错怎么办？
A:
1. 检查是否使用 pnpm 安装依赖
2. 检查环境变量是否配置正确
3. 检查百度地图 API Key 是否有效
4. 查看浏览器控制台错误信息
5. 查看后端日志（如有）

---

## 下一步操作

1. **下载 ZIP 文件**：将 `reits-assistant.zip` 下载到本地
2. **解压文件**：解压到本地目录
3. **安装依赖**：`pnpm install`
4. **配置环境**：复制 `.env.example` 到 `.env.local` 并配置
5. **启动服务**：`coze dev` 或 `pnpm dev`
6. **访问应用**：http://localhost:5000

---

## 项目文档

- **PROJECT_GUIDE.md** - 完整的项目指南（技术栈、架构、开发规范）
- **QUICK_EXPORT_GUIDE.md** - 快速导出指南
- **docs/核心模块实现优化计划.md** - 性能优化计划
- **docs/快速实施指南.md** - 快速实施指南
- **docs/安全增强与测试完善指南.md** - 安全增强指南
- **docs/REITs数据获取方式详细分析.md** - 数据获取分析

---

## 注意事项

1. **必须使用 pnpm**：项目配置了 `preinstall` 脚本，强制使用 pnpm 管理依赖。

2. **环境变量**：复制 `.env.example` 到 `.env.local`，并根据实际情况填写配置。

3. **百度地图 API Key**：如果需要使用地图功能，必须申请百度地图 API Key。

4. **数据库 Schema**：如果需要使用 MySQL 数据库，需要导入 `database/schema.sql`。

5. **性能优化**：WASM 模块已配置延迟加载，首次加载会更快。

6. **安全性**：当前 BBS 签名为模拟实现，如需真实签名功能，需要集成 `@docknetwork/crypto-wasm`。

---

## 技术支持

如需帮助，请参考项目文档或在项目仓库提交 Issue。

---

**导出完成！** 祝你本地调试顺利！🎉
