# REITs 数据获取方式分析

## 概述

REITs数据库中，不同类型的数据获取方式差异较大。部分数据可以通过API实现实时更新，部分需要从公开资料扫描提取，还有一些需要手工录入。

---

## 一、可专业接入 + 实时/准实时更新的数据

### 1. 市场表现数据（reit_market_stats）

| 字段 | 获取方式 | 数据源 | 更新频率 |
|------|---------|--------|----------|
| 开盘价、收盘价、最高价、最低价 | API | 上交所、深交所 | 实时（交易时段） |
| 成交量、成交额 | API | 上交所、深交所 | 实时（交易时段） |
| 换手率 | 计算 | 基于成交量计算 | 实时（交易时段） |
| 总市值 | 计算 | 基于收盘价计算 | 日收盘后 |

**数据源**：
- **上交所API**：`https://www.sse.com.cn/`
- **深交所API**：`https://www.szse.cn/`
- **新浪财经API**：`https://finance.sina.com.cn/`
- **东方财富API**：`https://quote.eastmoney.com/`

**接入难度**：⭐⭐（容易）
**实时性**：⭐⭐⭐⭐⭐（实时）

**技术实现**：
```typescript
// 示例：获取实时行情
async function getMarketData(reitCode: string) {
  const response = await fetch(`https://hq.sinajs.cn/list=${reitCode.replace('.', '')}`);
  const data = await response.text();
  // 解析数据：开盘价、收盘价、最高价、最低价、成交量等
  return parseMarketData(data);
}
```

---

### 2. 产品基本信息部分字段（reit_product_info）

| 字段 | 获取方式 | 数据源 | 更新频率 |
|------|---------|--------|----------|
| 基金代码、简称 | API | 交易所 | 上市时录入 |
| 上市日期 | API | 交易所 | 上市时录入 |
| 基金总份额 | API | 基金公司、交易所 | 季度更新 |
| 杠杆率 | 计算 | 基于财务数据计算 | 季度更新 |

**数据源**：
- **交易所官网**：产品列表、上市公告
- **基金公司官网**：基金规模、份额信息

**接入难度**：⭐⭐（容易）
**实时性**：⭐⭐⭐（准实时）

---

### 3. 经营权类运营数据部分字段（reit_property_concession_ops）

| 字段 | 获取方式 | 数据源 | 更新频率 |
|------|---------|--------|----------|
| 日均车流量 | API/智能设备 | 高速公路收费系统 | 日更新 |
| 处理能力 | 固定 | 设计参数 | 很少更新 |
| 实际处理量 | API/智能设备 | 运营监控系统 | 日/月更新 |
| 运营收入 | API | 财务系统 | 月/季度更新 |
| 特许经营权剩余年限 | 计算 | 基于到期日计算 | 每年更新 |

**数据源**：
- **高速公路**：收费系统、ETC数据
- **垃圾焚烧**：运营监控系统、称重系统
- **污水处理**：流量计、在线监测系统

**接入难度**：⭐⭐⭐（中等，需要对接运营方系统）
**实时性**：⭐⭐⭐⭐（高）

---

## 二、需要定期扫描 + 半自动化提取的数据

### 1. 财务指标（reit_financial_metrics）

| 字段 | 获取方式 | 数据源 | 更新频率 |
|------|---------|--------|----------|
| 营业收入、成本 | OCR + 人工核对 | 定期报告 | 季度更新 |
| FFO、AFFO | 计算 + 人工核对 | 定期报告 | 季度更新 |
| 可供分配金额 | OCR + 人工核对 | 定期报告 | 季度更新 |
| 现金分派率 | 计算 | 定期报告 | 季度更新 |
| 资产负债数据 | OCR + 人工核对 | 定期报告 | 季度更新 |

**数据源**：
- **巨潮资讯网**：`http://www.cninfo.com.cn/`（上市公司公告）
- **交易所官网**：定期报告下载
- **基金公司官网**：定期公告

**接入难度**：⭐⭐⭐⭐（较难，需要OCR+人工校验）
**实时性**：⭐⭐⭐（季度更新）

**技术实现**：
```typescript
// 示例：从PDF中提取财务数据
async function extractFinancialMetrics(pdfUrl: string) {
  // 1. 下载PDF
  const pdfBuffer = await downloadPDF(pdfUrl);

  // 2. 使用OCR提取文本
  const text = await extractTextFromPDF(pdfBuffer);

  // 3. 使用LLM/AI提取结构化数据
  const metrics = await extractFinancialDataWithAI(text);

  // 4. 人工核对关键数据
  return metrics;
}
```

---

### 2. 产权类运营数据（reit_property_equity_ops）

| 字段 | 获取方式 | 数据源 | 更新频率 |
|------|---------|--------|----------|
| 出租率 | OCR + 人工核对 | 定期报告 | 季度更新 |
| 平均租金 | OCR + 人工核对 | 定期报告 | 季度更新 |
| 租金收入 | OCR + 人工核对 | 定期报告 | 季度更新 |
| 前十大租户 | OCR + 人工核对 | 定期报告 | 季度更新 |
| 加权平均租期 | OCR + 人工核对 | 定期报告 | 季度更新 |
| 租约到期分布 | OCR + 人工核对 | 定期报告 | 季度更新 |

**数据源**：
- **巨潮资讯网**：定期报告
- **招募说明书**：初始租约信息
- **运营报告**：季度运营数据

**接入难度**：⭐⭐⭐⭐（较难，需要OCR+AI提取）
**实时性**：⭐⭐⭐（季度更新）

---

### 3. 底层资产信息（reit_property_base）

| 字段 | 获取方式 | 数据源 | 更新频率 |
|------|---------|--------|----------|
| 地理位置 | API + 人工核对 | 地图API、资产地址 | 很少更新 |
| 建筑面积、占地面积 | OCR + 人工核对 | 评估报告 | 很少更新 |
| 土地权证信息 | OCR + 人工核对 | 土地证 | 很少更新 |
| 土地使用期限 | OCR + 人工核对 | 土地证 | 很少更新 |
| 资产权利限制 | OCR + 人工核对 | 资产评估报告 | 按需更新 |

**数据源**：
- **招募说明书**：资产详细信息
- **资产评估报告**：物理参数
- **土地证**：权属信息
- **百度地图API**：经纬度坐标

**接入难度**：⭐⭐⭐（中等，需要一次性录入，后续很少变更）
**实时性**：⭐（很少更新）

---

### 4. 估值信息（reit_valuation）

| 字段 | 获取方式 | 数据源 | 更新频率 |
|------|---------|--------|----------|
| 评估价值 | OCR + 人工核对 | 评估报告 | 年度/季度更新 |
| 评估方法 | OCR + 人工核对 | 评估报告 | 年度/季度更新 |
| 折现率假设 | OCR + 人工核对 | 评估报告 | 年度/季度更新 |
| 资本化率 | OCR + 人工核对 | 评估报告 | 年度/季度更新 |
| 隐含资本化率 | 计算 | 基于市值计算 | 实时 |

**数据源**：
- **资产评估报告**：年度或季度评估
- **招募说明书**：初始评估
- **基金公司公告**：估值更新

**接入难度**：⭐⭐⭐⭐（较难，需要OCR+专业理解）
**实时性**：⭐⭐（年度/季度更新）

---

## 三、需要手工录入 + 定期更新的数据

### 1. 产品信息（reit_product_info）

| 字段 | 获取方式 | 数据源 | 更新频率 |
|------|---------|--------|----------|
| 基金管理人 | 手工录入 | 招募说明书 | 上市时录入 |
| 资产支持证券管理人 | 手工录入 | 招募说明书 | 上市时录入 |
| 运营管理机构 | 手工录入 | 招募说明书 | 上市时录入 |
| 产品结构说明 | 手工录入 | 招募说明书 | 上市时录入 |
| 信息披露负责人 | 手工录入 | 定期报告 | 按需更新 |

**数据源**：
- **招募说明书**：上市发行文件
- **基金公司官网**：公司信息

**接入难度**：⭐（简单，一次性录入）
**实时性**：⭐（很少更新）

---

### 2. 风险合规信息（reit_risk_compliance）

| 字段 | 获取方式 | 数据源 | 更新频率 |
|------|---------|--------|----------|
| 监管状态 | 手工录入 | 监管公告 | 按需更新 |
| 监管措施描述 | 手工录入 | 监管公告 | 按需更新 |
| 涉及的重大诉讼 | 手工录入 | 定期报告 | 按需更新 |
| 诉讼状态 | 手工录入 | 法院公告、定期报告 | 按需更新 |
| ESG评分 | 手工录入/第三方 | 评级机构报告 | 年度更新 |

**数据源**：
- **监管机构公告**：证监会、交易所
- **定期报告**：风险因素披露
- **ESG评级机构**：MSCI、富时罗素等
- **法院公告**：重大诉讼信息

**接入难度**：⭐⭐（中等，需要定期关注）
**实时性**：⭐⭐（按需更新）

---

### 3. 投资者结构（reit_market_stats部分字段）

| 字段 | 获取方式 | 数据源 | 更新频率 |
|------|---------|--------|----------|
| 机构投资者持有比例 | 手工录入 | 定期报告 | 季度更新 |
| 个人投资者持有比例 | 手工录入 | 定期报告 | 季度更新 |
| 前十大持有人 | 手工录入 | 定期报告 | 季度更新 |
| 原始权益人持有比例 | 手工录入 | 定期报告 | 季度更新 |

**数据源**：
- **定期报告**：前十名持有人情况
- **中登公司**：股权登记数据（非公开）

**接入难度**：⭐⭐⭐（中等，需要定期更新）
**实时性**：⭐⭐⭐（季度更新）

---

## 数据获取方式总结

### 按获取方式分类

| 数据表 | 专业接入API | 定期扫描提取 | 手工录入 | 总体难度 |
|--------|------------|-------------|----------|----------|
| reit_product_info | 部分字段 | - | 大部分字段 | ⭐⭐ |
| reit_property_base | 地理位置 | 物理参数 | 权属信息 | ⭐⭐⭐ |
| reit_property_equity_ops | - | 全部字段 | - | ⭐⭐⭐⭐ |
| reit_property_concession_ops | 部分字段 | 收入数据 | - | ⭐⭐⭐ |
| reit_financial_metrics | - | 全部字段 | - | ⭐⭐⭐⭐ |
| reit_valuation | - | 全部字段 | - | ⭐⭐⭐⭐ |
| reit_risk_compliance | - | 部分字段 | 大部分字段 | ⭐⭐ |
| reit_market_stats | 大部分字段 | - | 投资者结构 | ⭐⭐ |

### 按更新频率分类

| 更新频率 | 数据表/字段 | 获取方式 |
|----------|------------|----------|
| **实时** | 市场行情（股价、成交量） | API接入 |
| **日更新** | 经营权类运营数据（车流量、处理量） | API/智能设备 |
| **月更新** | 经营权类收入数据 | 定期扫描 |
| **季度更新** | 财务指标、产权类运营数据、投资者结构 | 定期扫描 |
| **年度更新** | 评估信息、ESG评分 | 定期扫描 |
| **很少更新** | 产品信息、底层资产信息、土地权证 | 一次性录入 |

---

## 推荐的数据获取策略

### 1. 高优先级：API接入（实时/准实时）

**目标数据**：
- 市场行情数据（股价、成交量）
- 产品基本信息（基金代码、上市日期）

**技术方案**：
```typescript
// 使用开源API
const MARKET_APIS = {
  SSE: 'https://www.sse.com.cn/api/market',
  SINA: 'https://hq.sinajs.cn/list=',
  EASTMONEY: 'https://quote.eastmoney.com/api',
};

// 定时任务：每日交易时段实时更新
cron.schedule('0 */10 9-15 * * 1-5', () => {
  updateMarketData();
});
```

---

### 2. 中优先级：定期扫描 + AI提取（半自动化）

**目标数据**：
- 财务指标
- 产权类运营数据
- 经营权类收入数据
- 评估信息

**技术方案**：
```typescript
// 1. 监控巨潮资讯网，定期爬取PDF
async function monitorPDFs() {
  const newReports = await crawlCNInfo();

  // 2. 使用OCR提取文本
  for (const report of newReports) {
    const text = await extractTextFromPDF(report.url);

    // 3. 使用LLM提取结构化数据
    const data = await extractDataWithLLM(text, reportType);

    // 4. 保存到数据库
    await saveToDatabase(data);
  }
}

// 5. 人工核对关键数据
await manualVerification();
```

**使用的技术**：
- **OCR**：Tesseract.js、Adobe PDF Services
- **AI提取**：大语言模型（豆包、DeepSeek）
- **PDF解析**：pdf.js、mammoth（Word）

---

### 3. 低优先级：手工录入（一次性/按需）

**目标数据**：
- 产品信息（基金管理人、运营机构等）
- 底层资产信息（土地权证、建筑面积等）
- 风险合规信息（监管状态、诉讼等）
- 投资者结构（前十大持有人）

**实施方案**：
- 提供后台管理界面，支持批量导入
- 支持Excel/CSV模板导入
- 提供数据校验和审核流程

---

## 数据质量控制

### 1. 数据校验规则

| 数据类型 | 校验规则 |
|----------|---------|
| 股价 | 必须大于0，合理范围0.1-100元 |
| 出租率 | 必须0-100%之间 |
| 财务数据 | 必须符合会计勾稽关系 |
| 日期格式 | 必须YYYY-MM-DD格式 |

### 2. 数据来源追溯

- 每条数据记录来源URL
- 记录更新时间和操作人
- 支持数据版本回滚

### 3. 异常数据监控

- 设置数据波动阈值报警
- 定期数据质量检查
- 自动识别异常值

---

## 成本效益分析

### API接入成本

| 数据类型 | 初期投入 | 运维成本 | 数据质量 |
|----------|---------|---------|---------|
| 市场行情API | 低（使用免费API） | 低 | 高 |
| 财务数据OCR | 中（开发OCR+AI） | 中 | 中（需人工校验） |
| 运营数据对接 | 高（需与运营方合作） | 高 | 高 |

### 推荐策略

1. **第一阶段**：接入市场行情API + 手工录入产品信息
2. **第二阶段**：开发PDF爬取+OCR功能，自动化财务数据提取
3. **第三阶段**：与运营方合作，接入实时运营数据系统
4. **第四阶段**：引入第三方数据服务，补充ESG、评级等专业数据

---

## 结论

| 数据类型 | 推荐获取方式 | 实现难度 | 数据质量建议 |
|----------|------------|---------|-------------|
| 市场行情 | API接入 | ⭐⭐ | 高，需要实时更新 |
| 财务指标 | OCR+AI提取 | ⭐⭐⭐⭐ | 高，需要人工校验 |
| 运营数据 | API对接/OCR | ⭐⭐⭐ | 高，需要与运营方合作 |
| 产品信息 | 手工录入 | ⭐ | 高，一次性录入 |
| 风险合规 | 手工录入 | ⭐⭐ | 中，需要定期关注 |
| 估值信息 | OCR+AI提取 | ⭐⭐⭐⭐ | 中，需要专业理解 |

**建议**：
- 优先接入市场行情API，实现实时数据展示
- 逐步开发PDF自动化提取功能，减少手工录入工作量
- 关键数据（财务指标）保持人工校验，确保准确性
- 运营数据可与REITs运营方合作，实现专业接入
